import taskManager.utility.*;
import taskManager.TaskManager;

PREFIXES:
	PREFIX arbi: <http://www.arbi.com//ontologies#>;
	PREFIX isro: <http://www.arbi.com//BuiltInPlan#>;		
GOALS:
	MAINTAIN alive  :UTILITY -10000;
	PERFORM	boot;
	
FACTS:
	FACT ArgumentLOG;
	FACT AGENT_ALIAS("TaskManager",	"agent://www.arbi.com/TaskManager" );
	FACT CURRENT_TIME (0);

OBSERVER: {
	UPDATE (CURRENT_TIME ($time)) (CURRENT_TIME (System.currentTimeMillis()));
	FACT TaskManager($tm);
	$tm.dequeueMessage();
}

PLAN PERFORM boot() {
	ID: "boot"
	BODY:

		System.out.println("---Start Jam---");
		RETRIEVE PlanLoader($loader);
		System.out.println("---Load plans---");
				
		$loader.loadPlan("./plan/planList.jam");
		
		PERFORM loadPlanPackage();
		System.out.println("---Load Complete---");
		
		PERFORM initialize();
		
		//PERFORM testUpdate();
		RETRIEVE TaskManager($tm);
		System.out.println("---Boot Complete---");


}

/*
		
		ASSERT TaskCreated("real","agent://www.mcarbi.com/Local1");
		$tm.sleepAwhile(3000);
		ASSERT TaskCreated("real","agent://www.mcarbi.com/Local2");
		$tm.sleepAwhile(3000);
		
		ASSERT TaskCreated("real","agent://www.mcarbi.com/Local3");
		$tm.sleepAwhile(3000);
		
		ASSERT TaskCreated("real","agent://www.mcarbi.com/Local4");
		$tm.sleepAwhile(3000);
		
				ASSERT TaskCreated("simulation","agent://www.mcarbi.com/Local12");
		$tm.sleepAwhile(3000);
		
		ASSERT TaskCreated("simulation","agent://www.mcarbi.com/Local13");
		$tm.sleepAwhile(3000);
		
		ASSERT TaskCreated("simulation","agent://www.mcarbi.com/Local14");
		$tm.sleepAwhile(3000);
		
		ASSERT TaskStarted("real","agent://www.mcarbi.com/Local2");
		$tm.sleepAwhile(3000);
				ASSERT TaskStarted("real","agent://www.mcarbi.com/Local1");
		$tm.sleepAwhile(3000);
				ASSERT TaskStarted("real","agent://www.mcarbi.com/Local4");
		$tm.sleepAwhile(3000);
				ASSERT TaskStarted("real","agent://www.mcarbi.com/Local3");
		$tm.sleepAwhile(3000);
				ASSERT TaskStarted("simulation","agent://www.mcarbi.com/Local12");
		$tm.sleepAwhile(3000);
				ASSERT TaskStarted("simulation","agent://www.mcarbi.com/Local14");
		$tm.sleepAwhile(3000);
				ASSERT TaskStarted("simulation","agent://www.mcarbi.com/Local13");
		$tm.sleepAwhile(3000);
		ASSERT TaskCompleted("real","agent://www.mcarbi.com/Local4");	
		$tm.sleepAwhile(3000);
		ASSERT TaskCompleted("real","agent://www.mcarbi.com/Local3");	
		$tm.sleepAwhile(3000);
		ASSERT TaskCompleted("real","agent://www.mcarbi.com/Local1");	
		$tm.sleepAwhile(3000);
		ASSERT TaskCompleted("real","agent://www.mcarbi.com/Local2");	
		
		ASSERT TaskCompleted("simulation","agent://www.mcarbi.com/Local13");	
		$tm.sleepAwhile(3000);
		ASSERT TaskCompleted("simulation","agent://www.mcarbi.com/Local14");	
		$tm.sleepAwhile(3000);
		ASSERT TaskCompleted("simulation","agent://www.mcarbi.com/Local12");	

		
*/

